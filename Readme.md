# ML-ะฟะปะฐััะพัะผะฐ ะดะปั ะพะฟัะธะผะธะทะฐัะธะธ ะฟะพัะพะบะพะฒ ะฟะฐัะธะตะฝัะพะฒ ะฒ ะะะก

ะฃะฝะธะฒะตััะฐะปัะฝะฐั ะธะฝัะตะปะปะตะบััะฐะปัะฝะฐั ะฟะปะฐััะพัะผะฐ ะฝะฐ ะฑะฐะทะต ะผะฐัะธะฝะฝะพะณะพ ะพะฑััะตะฝะธั ะดะปั ะพะฟัะธะผะธะทะฐัะธะธ ะฟะพัะพะบะพะฒ ะฟะฐัะธะตะฝัะพะฒ ะธ ัะตััััะพะฒ ะผะตะดะธัะธะฝัะบะธั ัััะตะถะดะตะฝะธะน. ะกะธััะตะผะฐ ะธะฝัะตะณัะธััะตััั ั ัะฐะทะปะธัะฝัะผะธ ะะะก, ะฒะบะปััะฐั ะะตะดะธะฐะปะพะณ, ะธ ะพะฑะตัะฟะตัะธะฒะฐะตั ัััะตะบัะธะฒะฝะพะต ะฟัะพะณะฝะพะทะธัะพะฒะฐะฝะธะต ะฟะพัะตัะฐะตะผะพััะธ ะธ ะพะฟัะธะผะธะทะฐัะธั ัะฐัะฟะธัะฐะฝะธั ัะฐะฑะพัั ะบะปะธะฝะธะบะธ.

## ๐ ะกะพะดะตัะถะฐะฝะธะต

- [ะะพะทะผะพะถะฝะพััะธ]
    
- [ะััะธัะตะบัััะฐ]
    
- [ะขะตัะฝะพะปะพะณะธะธ]
    
- [ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ]
    
- [ะกัััะบัััะฐ ะฟัะพะตะบัะฐ]
    
- [API]
    
- [ML-ะผะพะดะตะปั]
    
- [ะขะตััะธัะพะฒะฐะฝะธะต]
    
- [ะะฐะทะฒะตัััะฒะฐะฝะธะต]
    
- [ะะฐัััะฐะฑะธัะพะฒะฐะฝะธะต]

## ๐ ะะพะทะผะพะถะฝะพััะธ

- **ะัะพะณะฝะพะทะธัะพะฒะฐะฝะธะต ะฝะตัะฒะพะบ ะฟะฐัะธะตะฝัะพะฒ**ยั ะฒััะพะบะพะน ัะพัะฝะพัััั (AUC-ROC > 0.78)
    
- **ะะฟัะธะผะธะทะฐัะธั ัะฐัะฟะธัะฐะฝะธั ะฒัะฐัะตะน**ยั ััะตัะพะผ ะฟัะพะณะฝะพะทะธััะตะผะพะน ะฝะฐะณััะทะบะธ
    
- **ะะฝัะตะณัะฐัะธั ั ะะะก ะะตะดะธะฐะปะพะณ**ยะธ ะดััะณะธะผะธ ัะธััะตะผะฐะผะธ ัะตัะตะท API
    
- **ะะธะบัะพัะตัะฒะธัะฝะฐั ะฐััะธัะตะบัััะฐ**ยะดะปั ะณะธะฑะบะพะณะพ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั
    
- **ะะฝะฐะปะธัะธัะตัะบะธะต ะดะฐัะฑะพัะดั**ยะดะปั ะฒะธะทัะฐะปะธะทะฐัะธะธ ะฟะพัะพะบะพะฒ ะฟะฐัะธะตะฝัะพะฒ
    
- **REST API**ยะดะปั ะฒะทะฐะธะผะพะดะตะนััะฒะธั ั ััะพะฝัะตะฝะด-ะฟัะธะปะพะถะตะฝะธัะผะธ
    
- **ะัะธะฝััะพะฝะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ะทะฐะดะฐั**ยัะตัะตะท RabbitMQ
    
- **ะะฐะดะตะถะฝะพะต ััะฐะฝะตะฝะธะต ะดะฐะฝะฝัั**ยะฒ PostgreSQL
    

## ะััะธัะตะบัััะฐ

ะกะธััะตะผะฐ ะฟะพัััะพะตะฝะฐ ะฝะฐ ะผะธะบัะพัะตัะฒะธัะฝะพะน ะฐััะธัะตะบัััะต ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ Docker ะบะพะฝัะตะนะฝะตัะพะฒ. ะะปััะตะฒัะต ะบะพะผะฟะพะฝะตะฝัั:

1. **API ัะตัะฒะธั**ย- FastAPI ะฟัะธะปะพะถะตะฝะธะต, ะพะฑัะฐะฑะฐััะฒะฐััะตะต ะทะฐะฟัะพัั
    
2. **ML Worker**ย- ะกะตัะฒะธั ะดะปั ะฐัะธะฝััะพะฝะฝะพะน ะพะฑัะฐะฑะพัะบะธ ML ะทะฐะดะฐั
    
3. **ะะฐะทะฐ ะดะฐะฝะฝัั**ย- PostgreSQL ะดะปั ััะฐะฝะตะฝะธั ะดะฐะฝะฝัั
    
4. **ะกะตัะฒะธั ะพัะตัะตะดะตะน**ย- RabbitMQ ะดะปั ะฐัะธะฝััะพะฝะฝะพะณะพ ะพะฑะผะตะฝะฐ ัะพะพะฑัะตะฝะธัะผะธ
    
5. **ะะตะฑ-ะธะฝัะตััะตะนั**ย- Frontend ะฟัะธะปะพะถะตะฝะธะต ะดะปั ะฐะดะผะธะฝะธัััะฐัะพัะพะฒ ะธ ะฒัะฐัะตะน
    
6. **ะัะพะบัะธ-ัะตัะฒะตั**ย- Nginx ะดะปั ะฑะฐะปะฐะฝัะธัะพะฒะบะธ ะฝะฐะณััะทะบะธ
    

## ะกัะตะผะฐ ะฒะทะฐะธะผะพะดะตะนััะฒะธั ะบะพะผะฟะพะฝะตะฝัะพะฒ
โโโโโโโโโโโโโ     โโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโ
โ  ะะปะธะตะฝั   โโโโโโถโ   Nginx   โโโโโโถโ  API ัะตัะฒะธั  โ
โโโโโโโโโโโโโ     โโโโโโโโโโโโโ     โโโโโโโโฌโโโโโโโโ
                                           โ
                                           โผ
โโโโโโโโโโโโโ     โโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโ
โML Worker  โโโโโโถโ  RabbitMQ โโโโ PostgreSQLโ
โโโโโโโโโโโโโ     โโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโ


## ๐ง ะขะตัะฝะพะปะพะณะธะธ

- **Backend**: Python 3.12, FastAPI, SQLModel
    
- **ML**: scikit-learn, LightGBM, XGBoost, pandas, numpy
    
- **ะะฐะทะฐ ะดะฐะฝะฝัั**: PostgreSQL
    
- **ะัะพะบะตั ัะพะพะฑัะตะฝะธะน: RabbitMQ
    
- **ะะพะฝัะตะนะฝะตัะธะทะฐัะธั**: Docker
    
- **ะะตะฑ-ัะตัะฒะตั**: Nginx
    
- **ะะฒัะพัะธะทะฐัะธั**: JWT
    
- **ะคัะพะฝัะตะฝะด**: HTML, CSS, JavaScript, HTMX
    
- **LLM**: Ollama (Gemma)(ะัะดะตั ัะฑัะฐะฝะพ ะฒ ัะปะตะดัััะตะน ะฒะตััะธะธ)
    

## ๐ ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ

## ะัะตะดะฒะฐัะธัะตะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

- Docker ะธ Docker Compose
    
- Git
    
- ะะพัััะฟ ะบ ะธััะพะดะฝัะผ ะดะฐะฝะฝัะผ ะะะก
    

## ะฃััะฐะฝะพะฒะบะฐ

1. ะะปะพะฝะธัะพะฒะฐัั ัะตะฟะพะทะธัะพัะธะน:
    

2. ะกะพะทะดะฐัั ัะฐะนะป ะพะบััะถะตะฝะธัย`.env`ยะฝะฐ ะพัะฝะพะฒะต ัะฐะฑะปะพะฝะฐ .env.example:
    

3. ะะฐัััะพะธัั ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ะฒย`.env`ยัะฐะนะปะต:
    
## ะะฐะทะฐ ะดะฐะฝะฝัั 
    POSTGRES_USER=db_user 
    POSTGRES_PASSWORD=your_password 
    POSTGRES_DB=medical_db 
## RabbitMQ 
    RABBITMQ_USER=rmuser 
    RABBITMQ_PASS=rmpassword 
## ะะฐัััะพะนะบะธ ะฟัะธะปะพะถะตะฝะธั 
    SECRET_KEY=your_secret_key

4. ะะฐะฟัััะธัั ะบะพะฝัะตะนะฝะตัั ั ะฟะพะผะพััั Docker Compose:
    

bash

`docker compose -f docker-compose.yml up -d --build `

5. ะะฐะฟััะบ Streamlit ะธะฝัะตััะตะนัะฐ

`docker exec -d event-planner-api \
  streamlit run app.py --server.port 8501 --server.address 0.0.0.0`

6. ะัะพะฒะตัะธัั ัะฐะฑะพัั ัะธััะตะผั:
    
bash

`curl http://localhost/health`

ะะพัััะฟ ะบ ะผะพะฝะธัะพัะธะฝะณั
http://localhost:9090 # Prometheus
http://localhost:3000 # Grafana (admin/admin123)


## ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

โโโ app/                  # ะัะฝะพะฒะฝะพะน API ัะตัะฒะธั
โ   โโโ api.py            # ะขะพัะบะฐ ะฒัะพะดะฐ FastAPI ะฟัะธะปะพะถะตะฝะธั
โ   โโโ auth/             # ะะพะดัะปะธ ะฐะฒัะพัะธะทะฐัะธะธ 
โ   โโโ dags/             # DAGs ะดะปั Airflow(ะัะดะตั ะฒะฝะตะดัะตะฝะพ ะฒ ัะปะตะดัััะตะน ะฒะตััะธะธ)
โ   โโโ database/         # ะะฐัััะพะนะบะธ ะฑะฐะทั ะดะฐะฝะฝัั
โ   โโโ models/           # SQLModel ะผะพะดะตะปะธ
โ   โโโ routes/           # API ัะฝะดะฟะพะธะฝัั
โ   โโโ schemas/          # ะกัะตะผั ะะ (ะัะดะตั ะฟะตัะตะฝะตัะตะฝะพ ะฒ models)
โ   โโโ services/         # ะะธะทะฝะตั-ะปะพะณะธะบะฐ
โ   โ   โโโ crud/         # CRUD ะพะฟะตัะฐัะธะธ
โ   โ   โโโ rm/           # ะะฝัะตะณัะฐัะธั ั RabbitMQ
โ   โ   โโโ auth/         # ะะฒัะพัะธะทะฐัะธะธ 
โ   โ   โโโ logging/      # ะะพะณะธัะพะฒะฐะฝะธะต 
โ   โ   โโโ monitoring/   # ะะพะฝะธัะพัะธะฝะณ ัะฐะฑะพัั ะฟัะธะปะพะถะตะฝะธั 
โ   โ   โโโ ml_service.py # ะะฝัะตะณัะฐัะธั ั ML ะผะพะดะตะปัั
โ   โโโ view/             # HTML ัะฐะฑะปะพะฝั
โโโ ml_worker/            # ะกะตัะฒะธั ะพะฑัะฐะฑะพัะบะธ ML ะทะฐะดะฐั
โ   โโโ rmq/              # ะะปะธะตะฝัั RabbitMQ
โ   โโโ llm.py            # ะะฝัะตะณัะฐัะธั ั LLM
โ   โโโ main.py           # ะัะฝะพะฒะฝะพะน ะบะพะด worker'ะฐ
โโโ models/               # ะัะตะดะพะฑััะตะฝะฝัะต ML ะผะพะดะตะปะธ
โโโ nginx/                # ะะพะฝัะธะณััะฐัะธั Nginx
โโโ data/                 # ะะฐะฝะฝัะต ะดะปั ML ะผะพะดะตะปะตะน
โโโ tests/                # ะขะตััั
โ   โโโ test_api.py       # ะขะตััั API
โ   โโโ test_db.py        # ะขะตััั ะฑะฐะทั ะดะฐะฝะฝัั
โ   โโโ test_ml_integration.py        # ะขะตััั ะธะฝัะตะณัะฐัะธะธ
โ   โโโ test_predication_api.py        # ะขะตััั ะฑะฐะทั ะดะฐะฝะฝัั
โ   โโโ test_events.py    # ะขะตััั ะพะฑัะฐะฑะพัะบะธ ัะพะฑััะธะน
โโโ docker-compose.yaml   # ะะพะฝัะธะณััะฐัะธั Docker Compose
โโโ Dockerfile            # ะกะฑะพัะบะฐ ะพัะฝะพะฒะฝะพะณะพ ะฟัะธะปะพะถะตะฝะธั
โโโ README.md             # ะะพะบัะผะตะฝัะฐัะธั ะฟัะพะตะบัะฐ

## API

## ะัะฝะพะฒะฝัะต ัะฝะดะฟะพะธะฝัั

## ะะฒัะพัะธะทะฐัะธั

- `POST /auth/token`ย- ะะพะปััะตะฝะธะต JWT ัะพะบะตะฝะฐ
    
- `GET /auth/login`ย- ะกััะฐะฝะธัะฐ ะฐะฒัะพัะธะทะฐัะธะธ
    
- `POST /auth/login`ย- ะะฑัะฐะฑะพัะบะฐ ะฐะฒัะพัะธะทะฐัะธะธ
    

## ะกะพะฑััะธั

- `GET /events/`ย- ะะพะปััะตะฝะธะต ัะฟะธัะบะฐ ัะพะฑััะธะน
    
- `GET /events/{id}`ย- ะะพะปััะตะฝะธะต ัะพะฑััะธั ะฟะพ ID
    
- `POST /events/new`ย- ะกะพะทะดะฐะฝะธะต ะฝะพะฒะพะณะพ ัะพะฑััะธั
    
- `DELETE /events/{id}`ย- ะฃะดะฐะปะตะฝะธะต ัะพะฑััะธั
    

## ML ะพะฟะตัะฐัะธะธ

- `POST /ml/send_task`ย- ะัะฟัะฐะฒะบะฐ ะทะฐะดะฐัะธ ะฝะฐ ะพะฑัะฐะฑะพัะบั ML ะผะพะดะตะปัั
    
- `POST /ml/send_task_result`ย- ะกะพััะฐะฝะตะฝะธะต ัะตะทัะปััะฐัะฐ ะพะฑัะฐะฑะพัะบะธ
    
- `POST /ml/send_task_rpc`ย- ะกะธะฝััะพะฝะฝัะน ะฒัะทะพะฒ ML ะผะพะดะตะปะธ
    
- `GET /ml/tasks`ย- ะะพะปััะตะฝะธะต ัะฟะธัะบะฐ ML ะทะฐะดะฐั
    
- `GET /ml/tasks/{task_id}`ย- ะะพะปััะตะฝะธะต ะทะฐะดะฐัะธ ะฟะพ ID
    

## ะะพะปัะทะพะฒะฐัะตะปะธ

- `POST /users/signup`ย- ะะตะณะธัััะฐัะธั ะฝะพะฒะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั
    
- `POST /users/signin`ย- ะัะพะด ะฟะพะปัะทะพะฒะฐัะตะปั
    
- `GET /users/get_all_users`ย- ะะพะปััะตะฝะธะต ัะฟะธัะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปะตะน
    

## ะัะธะผะตัั ะทะฐะฟัะพัะพะฒ

## ะัะฟัะฐะฒะบะฐ ะทะฐะดะฐัะธ ะฝะฐ ML ะพะฑัะฐะฑะพัะบั

bash

`curl -X POST "http://localhost/ml/send_task" \   -H "Content-Type: application/json" \  -d '{"message": "ะัะตะดัะบะฐะทะฐัั ะฒะตัะพััะฝะพััั ะฝะตัะฒะบะธ ะฟะฐัะธะตะฝัะฐ", "user_id": 1}'`

## ะะพะปััะตะฝะธะต ัะตะทัะปััะฐัะฐ ะพะฑัะฐะฑะพัะบะธ

bash

`curl -X GET "http://localhost/ml/tasks/1" \   -H "Authorization: Bearer YOUR_TOKEN"`

## ML-ะผะพะดะตะปั

## ะะฟะธัะฐะฝะธะต

ML-ะผะพะดะตะปั ะธัะฟะพะปัะทัะตั ะฐะปะณะพัะธัะผ xgboost_opt ั ัะปัััะตะฝะธะตะผ ัะตัะตะท ัptuna ะดะปั ะฟัะพะณะฝะพะทะธัะพะฒะฐะฝะธั ะฒะตัะพััะฝะพััะธ ะฝะตัะฒะบะธ ะฟะฐัะธะตะฝัะฐ ะฝะฐ ะฟัะธะตะผ. ะะพะดะตะปั ะพะฑััะตะฝะฐ ะฝะฐ ะฝะฐะฑะพัะต ะดะฐะฝะฝัั, ัะพะดะตัะถะฐัะตะผ ะธะฝัะพัะผะฐัะธั ะพ 100,000+ ะฟัะธะตะผะฐั, ะธ ะดะพััะธะณะฐะตั ัะพัะฝะพััะธ 0.8923 (AUC-ROC 0.9729).

## ะัะฝะพะฒะฝัะต ะพัะพะฑะตะฝะฝะพััะธ ะผะพะดะตะปะธ

- **ะะปะฐัั DataLoader**ย- ะทะฐะณััะทะบะฐ ะธ ะธะฝัะตะณัะฐัะธั ะดะฐะฝะฝัั ะธะท ัะฐะทะปะธัะฝัั ะธััะพัะฝะธะบะพะฒ
    
- **ะะปะฐัั AdvancedFeatureEngineering**ย- ัะฐััะธัะตะฝะฝะพะต ัะพะทะดะฐะฝะธะต ะฟัะธะทะฝะฐะบะพะฒ
    
    - ะัะตะผะตะฝะฝัะต ะฟัะธะทะฝะฐะบะธ (ะดะตะฝั ะฝะตะดะตะปะธ, ะฒัะตะผั ะดะฝั, ัะธะบะปะธัะฝะพััั)
        
    - ะัะธะทะฝะฐะบะธ ะฟะฐัะธะตะฝัะฐ (ะธััะพัะธั ะฟะพัะตัะตะฝะธะน, ะฟะพะบะฐะทะฐัะตะปั ะฝะฐะดะตะถะฝะพััะธ)
        
    - ะัะธะทะฝะฐะบะธ ะทะฐะฟะธัะธ (ะฒัะตะผั ะฟัะตะดะฒะฐัะธัะตะปัะฝะพะน ะทะฐะฟะธัะธ, ััะปะพะฒะธั)
        
    - ะะฝัะตะณัะฐัะธั ะฒะฝะตัะฝะธั ะดะฐะฝะฝัั (ะฟะพะณะพะดะฐ, ััะฐะฝัะฟะพัั, ัะตะทะพะฝะฝะพััั)
        
- **ะะปะฐัั IntelligentFeatureProcessor**ย- ะธะฝัะตะปะปะตะบััะฐะปัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ะธ ะพัะฑะพั ะฟัะธะทะฝะฐะบะพะฒ
    
- **ะะปะฐัั AdvancedModelArchitecture**ย- ะฟัะพะดะฒะธะฝัััะต ะฐะฝัะฐะผะฑะปะตะฒัะต ะผะพะดะตะปะธ
    
- **ะะปะฐัั PredictionPostprocessor**ย- ะฟะพััะพะฑัะฐะฑะพัะบะฐ ะฟัะตะดัะบะฐะทะฐะฝะธะน
    
- **ะะปะฐัั ModelQualityAnalyzer**ย- ะบะพะผะฟะปะตะบัะฝัะน ะฐะฝะฐะปะธะท ะบะฐัะตััะฒะฐ ะผะพะดะตะปะธ
    
- **ะะปะฐัั ModelInterpreter**ย- ะธะฝัะตัะฟัะตัะฐัะธั ัะตะทัะปััะฐัะพะฒ ะผะพะดะตะปะธ
    

## ะัะฟะพะปัะทัะตะผัะต ะฐะปะณะพัะธัะผั

|ะะปะณะพัะธัะผ|ะขะพัะฝะพััั|ะะฐัะตััะฒะพ ะฟัะตะดัะบะฐะทะฐะฝะธั|
|---|---|---|
|ะะพะณะธััะธัะตัะบะฐั ัะตะณัะตััะธั|79.2%|68.6%|
|ะะตัะตะฒะพ ัะตัะตะฝะธะน|79.3%|72.5%|
|ะกะปััะฐะนะฝัะน ะปะตั|79.3%|68.2%|
|XGBoost|79.6%|74.9%|
|**LightGBM**|**79.6%**|**75.2%**|
|XGBoost|0.8923|0.9729|

